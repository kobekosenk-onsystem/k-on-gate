<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>K-on! Gateway</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body style="text-align:center; padding-top:100px; font-family:sans-serif; background-color:#f4f4f4;">
  <p>軽音部部室予約システムを起動中...</p>
  <script>
    const LIFF_ID = "2008880240-ln3wSnTk"; 
    const GAS_URL = "https://script.google.com/macros/s/AKfycbx0gQXbe86ygAkaqhpHzlDe6DTM7lOi-GTK-MAXEQjXD6F0ox_PdJ29SfQingCOPl70Qw/exec";

    window.onload = function() {
      liff.init({ liffId: LIFF_ID }).then(() => {
        if (!liff.isLoggedIn()) {
          liff.login();
        } else {
          liff.getProfile().then(p => {
            // 履歴を上書きしてGASへ移動
            window.location.replace(GAS_URL + "?uid=" + p.userId);
          });
        }
      }).catch(err => {
        // LIFFが動かなくても最悪手動で飛ばす
        window.location.replace(GAS_URL);
      });
    };
  </script>
</body>
</html>
